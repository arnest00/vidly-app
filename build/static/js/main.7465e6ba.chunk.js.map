{"version":3,"sources":["components/common/searchBox.jsx","services/logService.js","services/httpService.js","services/authService.js","components/common/tableHeader.jsx","components/common/tableBody.jsx","components/common/table.jsx","components/common/likeBtn.jsx","components/moviesTable.jsx","components/common/pagination.jsx","components/common/listGroup.jsx","utils/paginate.js","services/movieService.js","services/genreService.js","components/movies.jsx","components/common/input.jsx","components/common/select.jsx","components/common/form.jsx","components/movieForm.jsx","components/navbar.jsx","components/customers.jsx","components/rentals.jsx","components/notFound.jsx","components/common/loginForm.jsx","components/common/logout.jsx","services/userService.js","components/common/registerForm.jsx","components/common/protectedRoute.jsx","App.js","index.js"],"names":["SearchBox","value","onChange","type","name","placeholder","className","e","currentTarget","init","log","error","console","axios","defaults","baseURL","process","interceptors","response","use","status","logger","toast","Promise","reject","get","post","put","delete","setJwt","jwt","headers","common","apiEndpoint","tokenKey","email","password","a","http","data","localStorage","setItem","getJwt","getItem","login","loginWithJwt","logout","removeItem","getCurrentUser","jwtDecode","ex","TableHeader","raiseSort","path","sortColumn","props","order","onSort","renderSortIcon","column","this","columns","map","onClick","label","key","Component","TableBody","renderCell","item","content","_","createKey","_id","Table","LikeBtn","classes","liked","style","cursor","MoviesTable","movie","Link","to","title","onLike","deleteColumn","onDelete","id","user","auth","isAdmin","push","movies","Pagination","itemsCount","pageSize","currentPage","onPageChange","pagesCount","Math","ceil","pages","range","aria-label","page","ListGroup","textProperty","valueProperty","listItems","onListSelect","listType","currentList","defaultProps","paginate","items","pageNumber","startIdx","slice","take","movieUrl","getMovies","getMovie","saveMovie","body","deleteMovie","getGenres","Movies","state","genres","searchQuery","currentGenre","handleDelete","originalMovies","filter","m","setState","handleLike","index","indexOf","handleSort","handlePageChange","handleListSelect","list","handleSearch","query","getPagedData","allMovies","filteredMovies","toLowerCase","startsWith","genre","displayedMovies","orderBy","totalCount","length","marginBottom","Input","rest","htmlFor","Select","options","option","Form","errors","validate","Joi","schema","abortEarly","details","message","validateProperty","obj","handleSubmit","preventDefault","doSubmit","handleChange","input","errorMessage","disabled","MovieForm","genreId","numberInStock","dailyRentalRate","string","required","number","min","max","history","movieId","match","params","mapToViewModel","replace","populateGenres","populateMovie","onSubmit","renderInput","renderSelect","renderButton","Navbar","data-toggle","data-target","NavLink","Fragment","Customers","Rentals","NotFound","LoginForm","username","location","window","from","pathname","Redirect","Logout","register","RegisterForm","ProtectedRoute","component","render","Route","App","Switch","exact","ReactDOM","BrowserRouter","document","getElementById"],"mappings":"qTAeeA,EAbG,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SAC1B,OACE,uBACEC,KAAK,OACLC,KAAK,QACLH,MAAOA,EACPI,YAAY,YACZC,UAAU,oBACVJ,SAAU,SAAAK,GAAC,OAAIL,EAASK,EAAEC,cAAcP,W,kCCF/B,OACbQ,KATF,aAUEC,IANF,SAAaC,GACXC,QAAQD,MAAMA,KCDhBE,IAAMC,SAASC,QAAUC,iDAEzBH,IAAMI,aAAaC,SAASC,IAAI,MAAM,SAAAR,GAWpC,OATEA,EAAMO,UACNP,EAAMO,SAASE,QAAU,KACzBT,EAAMO,SAASE,OAAS,MAGxBC,EAAOX,IAAIC,GACXW,gBAAM,kCAGDC,QAAQC,OAAOb,MAOT,OACbc,IAAKZ,IAAMY,IACXC,KAAMb,IAAMa,KACZC,IAAKd,IAAMc,IACXC,OAAQf,IAAMe,OACdC,OATF,SAAgBC,GACdjB,IAAMC,SAASiB,QAAQC,OAAO,gBAAkBF,IClB5CG,EAAc,QACdC,EAAW,Q,4CAIV,WAAqBC,EAAOC,GAA5B,iBAAAC,EAAA,sEACuBC,EAAKZ,KAAKO,EAAa,CAAEE,QAAOC,aADvD,gBACSN,EADT,EACGS,KACRC,aAAaC,QAAQP,EAAUJ,GAF1B,4C,sBAsBA,SAASY,IACd,OAAOF,aAAaG,QAAQT,GAzB9BI,EAAKT,OAAOa,KA4BG,OACbE,MA3BK,SAAP,qCA4BEC,aAvBK,SAAsBf,GAC3BU,aAAaC,QAAQP,EAAUJ,IAuB/BgB,OApBK,WACLN,aAAaO,WAAWb,IAoBxBc,eAjBK,WACL,IACE,IAAMlB,EAAMU,aAAaG,QAAQT,GACjC,OAAOe,IAAUnB,GACjB,MAAOoB,GACP,OAAO,OAaTR,UCEaS,E,4MAtCbC,UAAY,SAAAC,GACV,IAAMC,EAAU,eAAO,EAAKC,MAAMD,YAC9BA,EAAWD,OAASA,EACtBC,EAAWE,MAA8B,QAArBF,EAAWE,MAAmB,OAAS,OAE3DF,EAAWD,KAAOA,EAClBC,EAAWE,MAAQ,OAErB,EAAKD,MAAME,OAAOH,I,EAGpBI,eAAiB,SAAAC,GAAW,IAClBL,EAAe,EAAKC,MAApBD,WAER,OAAIK,EAAON,OAASC,EAAWD,KAAa,KACnB,QAArBC,EAAWE,MAAwB,mBAAGlD,UAAU,mBAC7C,mBAAGA,UAAU,qB,uDAGZ,IAAD,OACP,OACE,gCACE,6BACGsD,KAAKL,MAAMM,QAAQC,KAAI,SAAAH,GAAM,OAC5B,qBACErD,UAAU,YAEVyD,QAAS,kBAAM,EAAKX,UAAUO,EAAON,OAHvC,UAKGM,EAAOK,MALV,IAKkB,EAAKN,eAAeC,KAH/BA,EAAON,MAAQM,EAAOM,gB,GA3BfC,a,iBC6BXC,E,4MA3BbC,WAAa,SAACC,EAAMV,GAClB,OAAIA,EAAOW,QAAgBX,EAAOW,QAAQD,GAEnCE,IAAE9C,IAAI4C,EAAMV,EAAON,O,EAG5BmB,UAAY,SAACH,EAAMV,GACjB,OAAOU,EAAKI,KAAOd,EAAON,MAAQM,EAAOM,M,uDAGjC,IAAD,SACmBL,KAAKL,MAAvBhB,EADD,EACCA,KAAMsB,EADP,EACOA,QAEd,OACE,gCACGtB,EAAKuB,KAAI,SAAAO,GAAI,OACZ,6BACGR,EAAQC,KAAI,SAAAH,GAAM,OACjB,6BAAwC,EAAKS,WAAWC,EAAMV,IAArD,EAAKa,UAAUH,EAAMV,QAFzBU,EAAKI,c,GAjBAP,aCiBTQ,EAhBD,SAAC,GAA2C,IAAzCb,EAAwC,EAAxCA,QAASP,EAA+B,EAA/BA,WAAYG,EAAmB,EAAnBA,OAAQlB,EAAW,EAAXA,KAC5C,OACE,wBAAOjC,UAAU,QAAjB,UACA,cAAC,EAAD,CACEuD,QAASA,EACTP,WAAYA,EACZG,OAAQA,IAEV,cAAC,EAAD,CACElB,KAAMA,EACNsB,QAASA,QCCAc,EAbC,SAACpB,GACf,IAAIqB,EAAU,cAGd,OAFKrB,EAAMsB,QAAOD,GAAW,MAG3B,mBACEE,MAAO,CAAEC,OAAQ,WACjBzE,UAAWsE,EACXb,QAAWR,EAAMQ,WC8CRiB,E,kDArBb,aAAe,IAAD,uBACZ,gBA7BFnB,QAAU,CACR,CACER,KAAM,QACNW,MAAO,QACPM,QAAS,SAAAW,GAAK,OAAI,cAACC,EAAA,EAAD,CAAMC,GAAE,kBAAaF,EAAMR,KAA3B,SAAmCQ,EAAMG,UAE7D,CAAE/B,KAAM,aAAcW,MAAO,SAC7B,CAAEX,KAAM,gBAAiBW,MAAO,SAChC,CAAEX,KAAM,kBAAmBW,MAAO,QAClC,CACEC,IAAK,OACLK,QAAS,SAAAW,GAAK,OAAI,cAAC,EAAD,CAASlB,QAAS,kBAAM,EAAKR,MAAM8B,OAAOJ,IAAQJ,MAAOI,EAAMJ,WAiBvE,EAbdS,aAAe,CACbrB,IAAK,SACLK,QAAS,SAAAW,GAAK,OACZ,wBACElB,QAAS,kBAAM,EAAKR,MAAMgC,SAASN,IACnC3E,UAAU,wBACVkF,GAAIP,EAAMR,IAHZ,sBAYF,IAAMgB,EAAOC,EAAK1C,iBAFN,OAGRyC,GAAQA,EAAKE,SACf,EAAK9B,QAAQ+B,KAAK,EAAKN,cAJb,E,qDAOJ,IAAD,EACsC1B,KAAKL,MAA1CsC,EADD,EACCA,OAAQvC,EADT,EACSA,WAAYG,EADrB,EACqBA,OADrB,EAC6BgC,KAEpC,OACE,cAAC,EAAD,CACE5B,QAASD,KAAKC,QACdtB,KAAMsD,EACNvC,WAAYA,EACZG,OAAQA,Q,GA5CUS,aC4BX4B,EA9BI,SAACvC,GAAW,IACrBwC,EAAoDxC,EAApDwC,WAAYC,EAAwCzC,EAAxCyC,SAAUC,EAA8B1C,EAA9B0C,YAAaC,EAAiB3C,EAAjB2C,aAErCC,EAAaC,KAAKC,KAAKN,EAAaC,GAC1C,GAAmB,IAAfG,EAAkB,OAAO,KAC7B,IAAMG,EAAQ/B,IAAEgC,MAAM,EAAGJ,EAAa,GAEtC,OACE,qBAAKK,aAAW,mBAAhB,SACE,oBAAIlG,UAAU,aAAd,SACIgG,EAAMxC,KAAI,SAAA2C,GAAI,OACd,oBACEnG,UAAYmG,IAASR,EAAc,mBAAqB,YAD1D,SAIE,mBAAG3F,UAAU,YAAYyD,QAAS,kBAAMmC,EAAaO,IAArD,SAA6DA,KAFxDA,WCdXC,EAAY,SAAC,GAAqF,IAAnFC,EAAkF,EAAlFA,aAAcC,EAAoE,EAApEA,cAAeC,EAAqD,EAArDA,UAAqBC,GAAgC,EAA1CC,SAA0C,EAAhCD,cAAcE,EAAkB,EAAlBA,YACnF,OACE,qBAAK1G,UAAU,aAAf,SACIuG,EAAU/C,KAAI,SAAAO,GAAI,OAClB,wBACElE,KAAK,SACL4D,QAAS,kBAAM+C,EAAazC,IAC5B/D,UAAW0G,IAAgB3C,EAAO,gDAAkD,yCAHtF,SAMKA,EAAKsC,IAFHtC,EAAKuC,UASpBF,EAAUO,aAAe,CACvBN,aAAc,OACdC,cAAe,OAOFF,QC3BR,SAASQ,EAASC,EAAOC,EAAYpB,GAC1C,IAAMqB,GAAYD,EAAa,GAAKpB,EACpC,OAAOzB,IAAE4C,GACNG,MAAMD,GACNE,KAAKvB,GACL/F,QCLL,IAAMgC,EAAc,UAEpB,SAASuF,EAAShC,GAChB,MAAM,GAAN,OAAUvD,EAAV,YAAyBuD,GAGpB,SAAeiC,IAAtB,+B,4CAAO,sBAAApF,EAAA,+EACEC,EAAKb,IAAIQ,IADX,4C,sBAIA,SAAeyF,EAAtB,kC,4CAAO,WAAwBlC,GAAxB,SAAAnD,EAAA,+EACEC,EAAKb,IAAI+F,EAAShC,KADpB,4C,sBAIA,SAAemC,EAAtB,kC,4CAAO,WAAyB1C,GAAzB,eAAA5C,EAAA,0DACD4C,EAAMR,IADL,8BAEGmD,EAFH,eAEc3C,IACLR,IAHT,kBAIInC,EAAKX,IAAI6F,EAASvC,EAAMR,KAAMmD,IAJlC,gCAOEtF,EAAKZ,KAAKO,EAAagD,IAPzB,4C,sBAUA,SAAS4C,GAAYrC,GAC1B,OAAOlD,EAAKV,OAAO4F,EAAShC,ICzBvB,SAASsC,KACd,OAAOxF,EAAKb,IAAI,W,ICqJHsG,G,4MA3IbC,MAAQ,CACNnC,OAAQ,GACRoC,OAAQ,GACRjC,SAAU,EACVkC,YAAa,GACbC,aAAc,KACdlC,YAAa,EACb3C,WAAY,CAAED,KAAM,QAASG,MAAO,Q,EAWtC4E,a,uCAAe,WAAMnD,GAAN,iBAAA5C,EAAA,6DACPgG,EAAiB,EAAKL,MAAMnC,OAC5BA,EAASwC,EAAeC,QAAO,SAAAC,GAAC,OAAIA,EAAE9D,MAAQQ,EAAMR,OAC1D,EAAK+D,SAAS,CAAE3C,WAHH,kBAMLgC,GAAY5C,EAAMR,KANb,uDAQP,KAAGvD,UAAmC,MAAvB,KAAGA,SAASE,QAC7BE,QAAMX,MAAM,wCAEd,EAAK6H,SAAS,CAAE3C,OAAQwC,IAXb,iE,wDAefI,WAAa,SAAAxD,GACX,IAAMY,EAAM,YAAO,EAAKmC,MAAMnC,QACxB6C,EAAQ7C,EAAO8C,QAAQ1D,GAE7BY,EAAO6C,GAAP,eAAqB7C,EAAO6C,IAC5B7C,EAAO6C,GAAO7D,OAASgB,EAAO6C,GAAO7D,MAErC,EAAK2D,SAAS,CAAC3C,Y,EAGjB+C,WAAa,SAAAtF,GACX,EAAKkF,SAAS,CAAElF,gB,EAGlBuF,iBAAmB,SAAApC,GACjB,EAAK+B,SAAS,CAAEvC,YAAaQ,K,EAG/BqC,iBAAmB,SAAAC,GACjB,EAAKP,SAAS,CAAEN,YAAa,GAAIC,aAAcY,EAAM9C,YAAa,K,EAGpE+C,aAAe,SAAAC,GACb,EAAKT,SAAS,CAAEN,YAAae,EAAOd,aAAc,KAAMlC,YAAa,K,EAGvEiD,aAAe,WAAO,IAAD,EAQf,EAAKlB,MANCmB,EAFS,EAEjBtD,OACAG,EAHiB,EAGjBA,SACAC,EAJiB,EAIjBA,YACAkC,EALiB,EAKjBA,aACA7E,EANiB,EAMjBA,WACA4E,EAPiB,EAOjBA,YAGEkB,EAAiBD,EACjBjB,EACFkB,EAAiBD,EAAUb,QAAO,SAAAC,GAAC,OACjCA,EAAEnD,MAAMiE,cAAcC,WAAWpB,EAAYmB,kBAExClB,GAAgBA,EAAa1D,MACpC2E,EAAiBD,EAAUb,QAAO,SAAAC,GAAC,OAAIA,EAAEgB,MAAM9E,MAAQ0D,EAAa1D,QAEtE,IACM+E,EAAkBtC,EADH3C,IAAEkF,QAAQL,EAAgB,CAAC9F,EAAWD,MAAO,CAACC,EAAWE,QAC/ByC,EAAaD,GAE5D,MAAO,CAAE0D,WAAaN,EAAeO,OAAQpH,KAAMiH,I,0MArE5B1B,K,uBAAfvF,E,EAAAA,KACF0F,E,CAAU,CAAE7H,KAAM,aAAcqE,IAAK,K,mBAASlC,I,SAErBkF,I,gBAAjB5B,E,EAANtD,KACRqB,KAAK4E,SAAS,CAAE3C,SAAQoC,W,sIAoEhB,IAAD,EAQHrE,KAAKoE,MANPC,EAFK,EAELA,OACAjC,EAHK,EAGLA,SACAC,EAJK,EAILA,YACAkC,EALK,EAKLA,aACA7E,EANK,EAMLA,WACA4E,EAPK,EAOLA,YAEMzC,EAAS7B,KAAKL,MAAdkC,KATD,EAWuC7B,KAAKsF,eAA3CQ,EAXD,EAWCA,WAAkBF,EAXnB,EAWajH,KAEpB,OACE,sBAAKjC,UAAU,MAAf,UACE,qBAAKA,UAAU,QAAf,SACE,cAAC,EAAD,CACEuG,UAAWoB,EACXjB,YAAamB,EACbrB,aAAclD,KAAKkF,qBAGvB,sBAAKxI,UAAU,MAAf,UACImF,GAAQ,cAACP,EAAA,EAAD,CAAMC,GAAG,cAAT,SACR,wBACEhF,KAAK,SACLG,UAAU,kBACVwE,MAAO,CAAE8E,aAAc,IAHzB,yBAQF,oBAAGtJ,UAAU,MAAb,qBAA4BoJ,EAA5B,8BACA,cAAC,EAAD,CACEzJ,MAAOiI,EACPhI,SAAU0D,KAAKoF,eAEjB,cAAC,EAAD,CACEnD,OAAQ2D,EACRlG,WAAYA,EACZ+B,OAAQzB,KAAK6E,WACblD,SAAU3B,KAAKwE,aACf3E,OAAQG,KAAKgF,aAEf,cAAC,EAAD,CACE7C,WAAY2D,EACZ1D,SAAUA,EACVC,YAAaA,EACbC,aAActC,KAAKiF,6B,GApIV3E,a,+CCKN2F,GAfD,SAAC,GAAqC,IAAnCzJ,EAAkC,EAAlCA,KAAM4D,EAA4B,EAA5BA,MAAOrD,EAAqB,EAArBA,MAAUmJ,EAAW,yCACjD,OACE,sBAAKxJ,UAAU,aAAf,UACE,uBAAOyJ,QAAS3J,EAAhB,SAAuB4D,IACvB,iDACM8F,GADN,IAEEtE,GAAIpF,EACJA,KAAMA,EACNE,UAAU,kBAEXK,GAAS,qBAAKL,UAAU,qBAAf,SAAqCK,QCUtCqJ,GApBA,SAAC,GAA4C,IAA3C5J,EAA0C,EAA1CA,KAAM4D,EAAoC,EAApCA,MAAOiG,EAA6B,EAA7BA,QAAStJ,EAAoB,EAApBA,MAAUmJ,EAAU,mDACzD,OACE,sBAAKxJ,UAAU,aAAf,UACE,uBAAOyJ,QAAS3J,EAAhB,SAAuB4D,IACvB,mDACM8F,GADN,IAEE1J,KAAMA,EACNoF,GAAIpF,EACJE,UAAU,eAJZ,UAME,wBAAQL,MAAM,KACbgK,EAAQnG,KAAI,SAAAoG,GAAM,OACjB,wBAAyBjK,MAAOiK,EAAOzF,IAAvC,SAA6CyF,EAAO9J,MAAvC8J,EAAOzF,YAGvB9D,GAAS,qBAAKL,UAAU,qBAAf,SAAqCK,QCyEtCwJ,G,4MApFbnC,MAAQ,CACNzF,KAAM,GACN6H,OAAQ,I,EAGVC,SAAW,WACT,IACQ1J,EAAU2J,KAAID,SAAS,EAAKrC,MAAMzF,KAAM,EAAKgI,OADrC,CAAEC,YAAY,IACtB7J,MACR,IAAKA,EAAO,OAAO,KAEnB,IALe,EAKTyJ,EAAS,GALA,eAMEzJ,EAAM8J,SANR,IAMf,gCAASpG,EAAT,QACE+F,EAAO/F,EAAKhB,KAAK,IAAMgB,EAAKqG,SAPf,8BAQf,OAAON,G,EAGTO,iBAAmB,YAAsB,IAAnBvK,EAAkB,EAAlBA,KAAMH,EAAY,EAAZA,MACpB2K,EAAG,gBAAMxK,EAAQH,GACjBsK,EAAM,gBAAMnK,EAAO,EAAKmK,OAAOnK,IAC7BO,EAAU2J,KAAID,SAASO,EAAKL,GAA5B5J,MACR,OAAOA,EAAQA,EAAM8J,QAAQ,GAAGC,QAAU,M,EAG5CG,aAAe,SAAAtK,GACbA,EAAEuK,iBAEF,IAAMV,EAAS,EAAKC,WACpB,EAAK7B,SAAS,CAAE4B,OAAQA,GAAU,KAC9BA,GAEJ,EAAKW,Y,EAGPC,aAAe,YAA+B,IAAbC,EAAY,EAA3BzK,cACV4J,EAAM,eAAO,EAAKpC,MAAMoC,QACxBc,EAAe,EAAKP,iBAAiBM,GACvCC,EAAcd,EAAOa,EAAM7K,MAAQ8K,SAC3Bd,EAAOa,EAAM7K,MAEzB,IAAMmC,EAAI,eAAO,EAAKyF,MAAMzF,MAC5BA,EAAK0I,EAAM7K,MAAQ6K,EAAMhL,MAEzB,EAAKuI,SAAS,CAAEjG,OAAM6H,Y,2DAGXpG,GACX,OACE,wBAAQmH,SAAUvH,KAAKyG,WAAY/J,UAAU,kBAA7C,SACG0D,M,kCAKK5D,EAAM4D,GAAuB,IAAhB7D,EAAe,uDAAR,OAAQ,EACbyD,KAAKoE,MAAtBzF,EAD8B,EAC9BA,KAAM6H,EADwB,EACxBA,OAEd,OACE,cAAC,GAAD,CACEjK,KAAMA,EACNC,KAAMA,EACNH,MAAOsC,EAAKnC,GACZ4D,MAAOA,EACP9D,SAAU0D,KAAKoH,aACfrK,MAAOyJ,EAAOhK,O,mCAKPA,EAAM4D,EAAOiG,GAAU,IAAD,EACRrG,KAAKoE,MAAtBzF,EADyB,EACzBA,KAAM6H,EADmB,EACnBA,OAEd,OACE,cAAC,GAAD,CACEhK,KAAMA,EACNH,MAAOsC,EAAKnC,GACZ4D,MAAOA,EACPiG,QAASA,EACT/J,SAAU0D,KAAKoH,aACfrK,MAAOyJ,EAAOhK,S,GA/EH8D,aC4EJkH,G,4MA1EbpD,MAAQ,CACNzF,KAAM,CACJ6C,MAAO,GACPiG,QAAS,GACTC,cAAe,GACfC,gBAAiB,IAEnBtD,OAAQ,GACRmC,OAAQ,I,EAGVG,OAAS,CACP9F,IAAK6F,KAAIkB,SACTpG,MAAOkF,KAAIkB,SAASC,WAAWzH,MAAM,SACrCqH,QAASf,KAAIkB,SAASC,WAAWzH,MAAM,SACvCsH,cAAehB,KAAIoB,SAASC,IAAI,GAAGC,IAAI,KAAKH,WAAWzH,MAAM,mBAC7DuH,gBAAiBjB,KAAIoB,SAASD,WAAWE,IAAI,GAAGC,IAAI,IAAI5H,MAAM,sB,EAoChE+G,S,sBAAW,sBAAA1I,EAAA,sEACHsF,EAAU,EAAKK,MAAMzF,MADlB,OAGT,EAAKgB,MAAMsI,QAAQjG,KAAK,WAHf,2C,iMAhCsBkC,K,gBAAjBG,E,EAAN1F,KACRqB,KAAK4E,SAAS,CAAEP,W,4QAME,SADV6D,EAAUlI,KAAKL,MAAMwI,MAAMC,OAAOxG,I,iEAGVkC,EAASoE,G,gBAAzB7G,E,EAAN1C,KACRqB,KAAK4E,SAAS,CAAEjG,KAAMqB,KAAKqI,eAAehH,K,kDAEtC,KAAG/D,UAAmC,MAAvB,KAAGA,SAASE,QAC7BwC,KAAKL,MAAMsI,QAAQK,QAAQ,c,4RAKzBtI,KAAKuI,iB,uBACLvI,KAAKwI,gB,2IAGEnH,GACb,MAAO,CACLR,IAAKQ,EAAMR,IACXW,MAAOH,EAAMG,MACbiG,QAASpG,EAAMsE,MAAM9E,IACrB6G,cAAerG,EAAMqG,cACrBC,gBAAiBtG,EAAMsG,mB,+BAWzB,OACE,gCACE,4CACA,uBAAMc,SAAUzI,KAAKiH,aAArB,UACGjH,KAAK0I,YAAY,QAAS,SAC1B1I,KAAK2I,aAAa,UAAW,QAAS3I,KAAKoE,MAAMC,QACjDrE,KAAK0I,YAAY,gBAAiB,QAAS,UAC3C1I,KAAK0I,YAAY,kBAAmB,OAAQ,UAC5C1I,KAAK4I,aAAa,kB,GApELrC,I,SCoCTsC,GAvCA,SAAC,GAAc,IAAZhH,EAAW,EAAXA,KAChB,OACE,sBAAKnF,UAAU,gDAAf,UACE,cAAC4E,EAAA,EAAD,CAAM5E,UAAU,eAAe6E,GAAG,IAAlC,uBAIA,wBACE7E,UAAU,iBACVH,KAAK,SACLuM,cAAY,WACZC,cAAY,aAJd,SAME,sBAAMrM,UAAU,0BAGlB,qBAAKA,UAAU,2BAA2BkF,GAAG,YAA7C,SACE,sBAAKlF,UAAU,aAAf,UACE,cAACsM,GAAA,EAAD,CAAStM,UAAU,oBAAoB6E,GAAG,UAA1C,oBACA,cAACyH,GAAA,EAAD,CAAStM,UAAU,oBAAoB6E,GAAG,aAA1C,uBACA,cAACyH,GAAA,EAAD,CAAStM,UAAU,oBAAoB6E,GAAG,WAA1C,sBACEM,GACA,eAAC,IAAMoH,SAAP,WACE,cAACD,GAAA,EAAD,CAAStM,UAAU,oBAAoB6E,GAAG,SAA1C,mBACA,cAACyH,GAAA,EAAD,CAAStM,UAAU,oBAAoB6E,GAAG,YAA1C,yBAGHM,GACC,eAAC,IAAMoH,SAAP,WACE,cAACD,GAAA,EAAD,CAAStM,UAAU,oBAAoB6E,GAAG,WAA1C,SAAsDM,EAAKrF,OAC3D,cAACwM,GAAA,EAAD,CAAStM,UAAU,oBAAoB6E,GAAG,UAA1C,gCCzBC2H,GANG,WAChB,OACE,4CCIWC,GANC,WACd,OACE,0CCIWC,GANE,WACf,OACE,4CCgDWC,G,4MA7CbjF,MAAQ,CACNzF,KAAM,CACJ2K,SAAU,GACV9K,SAAU,IAEZgI,OAAQ,I,EAGVG,OAAS,CACP2C,SAAU5C,KAAIkB,SAASC,WAAWzH,MAAM,YACxC5B,SAAUkI,KAAIkB,SAASC,WAAWzH,MAAM,a,EAG1C+G,S,sBAAW,gCAAA1I,EAAA,sEAECE,EAAS,EAAKyF,MAAdzF,KAFD,SAGDmD,EAAK9C,MAAML,EAAK2K,SAAU3K,EAAKH,UAH9B,OAKC4F,EAAU,EAAKzE,MAAM4J,SAArBnF,MACRoF,OAAOD,SAAWnF,EAAQA,EAAMqF,KAAKC,SAAW,IANzC,gDAQH,KAAGpM,UAAmC,MAAvB,KAAGA,SAASE,UACvBgJ,EADuC,eAC1B,EAAKpC,MAAMoC,SACvB8C,SAAW,KAAGhM,SAASqB,KAC9B,EAAKiG,SAAS,CAAE4B,YAXX,iE,uDAiBT,OAAI1E,EAAK1C,iBAAyB,cAACuK,EAAA,EAAD,CAAUpI,GAAG,MAG7C,gCACE,uCACA,uBAAMkH,SAAUzI,KAAKiH,aAArB,UACGjH,KAAK0I,YAAY,WAAY,YAC7B1I,KAAK0I,YAAY,WAAY,WAAY,YACzC1I,KAAK4I,aAAa,oB,GAvCLrC,ICQTqD,G,kLATX9H,EAAK5C,SACLsK,OAAOD,SAAW,M,+BAIlB,OAAO,S,GAPUjJ,aCCd,SAASuJ,GAAShI,GACvB,OAAOnD,EAAKZ,KAHM,SAGY,CAC5BS,MAAOsD,EAAKyH,SACZ9K,SAAUqD,EAAKrD,SACfhC,KAAMqF,EAAKrF,O,IC2CAsN,G,4MA5Cb1F,MAAQ,CACNzF,KAAM,CACJ2K,SAAU,GACV9K,SAAU,GACVhC,KAAM,IAERgK,OAAQ,I,EAGVG,OAAS,CACP2C,SAAU5C,KAAIkB,SAASrJ,QAAQsJ,WAAWzH,MAAM,YAChD5B,SAAUkI,KAAIkB,SAASG,IAAI,GAAGF,WAAWzH,MAAM,YAC/C5D,KAAMkK,KAAIkB,SAASC,WAAWzH,MAAM,S,EAGtC+G,S,sBAAW,8BAAA1I,EAAA,+EAEgBoL,GAAS,EAAKzF,MAAMzF,MAFpC,OAEDrB,EAFC,OAGPwE,EAAK7C,aAAa3B,EAASa,QAAQ,iBACnCqL,OAAOD,SAAS,KAJT,gDAMH,KAAGjM,UAAmC,MAAvB,KAAGA,SAASE,UACvBgJ,EADuC,eAC1B,EAAKpC,MAAMoC,SACvB8C,SAAW,KAAGhM,SAASqB,KAC9B,EAAKiG,SAAS,CAAE4B,YATX,iE,uDAeT,OACE,gCACE,0CACA,uBAAMiC,SAAUzI,KAAKiH,aAArB,UACGjH,KAAK0I,YAAY,WAAY,YAC7B1I,KAAK0I,YAAY,WAAY,WAAY,YACzC1I,KAAK0I,YAAY,OAAQ,QACzB1I,KAAK4I,aAAa,sB,GAtCFrC,ICaZwD,GAfQ,SAAC,GAAoD,EAAlDtK,KAAmD,IAAlCa,EAAiC,EAA5C0J,UAAsBC,EAAsB,EAAtBA,OAAW/D,EAAW,8CAC1E,OACE,cAACgE,EAAA,EAAD,2BACMhE,GADN,IAEE+D,OAAQ,SAAAtK,GACN,OAAKmC,EAAK1C,iBAIHkB,EAAY,cAACA,EAAD,eAAeX,IAAYsK,EAAOtK,GAJlB,cAACgK,EAAA,EAAD,CAAUpI,GAAI,CAC/CmI,SAAU,SACVtF,MAAO,CAAEqF,KAAM9J,EAAM4J,kBC4ChBY,I,kNAtCb/F,MAAQ,G,kEAGN,IAAMvC,EAAOC,EAAK1C,iBAClBY,KAAK4E,SAAS,CAAE/C,W,+BAGR,IACAA,EAAS7B,KAAKoE,MAAdvC,KAER,OACE,eAAC,IAAMoH,SAAP,WACE,cAAC,iBAAD,IACA,cAAC,GAAD,CACEpH,KAAMA,IAER,sBAAMnF,UAAU,YAAhB,SACE,eAAC0N,EAAA,EAAD,WACE,cAACF,EAAA,EAAD,CAAOzK,KAAK,UAAUuK,UAAWJ,KACjC,cAACM,EAAA,EAAD,CAAOzK,KAAK,SAASuK,UAAWX,KAChC,cAACa,EAAA,EAAD,CAAOzK,KAAK,YAAYuK,UAAWF,KACnC,cAAC,GAAD,CAAgBrK,KAAK,cAAcuK,UAAWxC,KAC9C,cAAC0C,EAAA,EAAD,CACEzK,KAAK,UACLwK,OAAQ,SAAAtK,GAAK,OAAI,cAAC,GAAD,2BAAYA,GAAZ,IAAmBkC,KAAMA,QAE5C,cAACqI,EAAA,EAAD,CAAOzK,KAAK,aAAauK,UAAWd,KACpC,cAACgB,EAAA,EAAD,CAAOzK,KAAK,WAAWuK,UAAWb,KAClC,cAACe,EAAA,EAAD,CAAOzK,KAAK,aAAauK,UAAWZ,KACpC,cAACO,EAAA,EAAD,CAAUU,OAAK,EAACZ,KAAK,IAAIlI,GAAG,YAC5B,cAACoI,EAAA,EAAD,CAAUpI,GAAG,2B,GA/BPjB,c,YCRlBgK,IAASL,OACP,cAACM,EAAA,EAAD,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.7465e6ba.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst SearchBox = ({ value, onChange }) => {\r\n  return (\r\n    <input\r\n      type=\"text\"\r\n      name='query'\r\n      value={value}\r\n      placeholder='Search...'\r\n      className='form-control my-3'\r\n      onChange={e => onChange(e.currentTarget.value)}\r\n    />\r\n  );\r\n};\r\n \r\nexport default SearchBox;","function init() {\r\n  \r\n};\r\n\r\nfunction log(error) {\r\n  console.error(error)\r\n};\r\n\r\nexport default {\r\n  init,\r\n  log\r\n};","import axios from 'axios';\r\nimport logger from './logService';\r\nimport { toast } from 'react-toastify';\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\naxios.interceptors.response.use(null, error => {\r\n  const expectedError =\r\n    error.response &&\r\n    error.response.status >= 400 &&\r\n    error.response.status < 500;\r\n\r\n  if (!expectedError) {\r\n    logger.log(error);\r\n    toast('An unexpected error occurred!');\r\n  };\r\n  \r\n  return Promise.reject(error);\r\n});\r\n\r\nfunction setJwt(jwt) {\r\n  axios.defaults.headers.common['x-auth-token'] = jwt;\r\n}\r\n\r\nexport default {\r\n  get: axios.get,\r\n  post: axios.post,\r\n  put: axios.put,\r\n  delete: axios.delete,\r\n  setJwt\r\n};","import jwtDecode from 'jwt-decode';\r\nimport http from './httpService';\r\n\r\nconst apiEndpoint = '/auth';\r\nconst tokenKey = 'token';\r\n\r\nhttp.setJwt(getJwt());\r\n\r\nexport async function login(email, password) {\r\n  const { data: jwt } = await http.post(apiEndpoint, { email, password });\r\n  localStorage.setItem(tokenKey, jwt);\r\n};\r\n\r\nexport function loginWithJwt(jwt) {\r\n  localStorage.setItem(tokenKey, jwt);\r\n};\r\n\r\nexport function logout() {\r\n  localStorage.removeItem(tokenKey);\r\n};\r\n\r\nexport function getCurrentUser() {\r\n  try {\r\n    const jwt = localStorage.getItem(tokenKey);\r\n    return jwtDecode(jwt);\r\n  } catch (ex) {\r\n    return null;\r\n  };\r\n};\r\n\r\nexport function getJwt() {\r\n  return localStorage.getItem(tokenKey);\r\n};\r\n\r\nexport default {\r\n  login,\r\n  loginWithJwt,\r\n  logout,\r\n  getCurrentUser,\r\n  getJwt\r\n};","import React, { Component } from 'react';\r\n\r\nclass TableHeader extends Component {\r\n  raiseSort = path => {\r\n    const sortColumn = {...this.props.sortColumn};\r\n    if (sortColumn.path === path) {\r\n      sortColumn.order = (sortColumn.order === 'asc') ? 'desc' : 'asc';\r\n    } else {\r\n      sortColumn.path = path;\r\n      sortColumn.order = 'asc';\r\n    };\r\n    this.props.onSort(sortColumn);\r\n  };\r\n\r\n  renderSortIcon = column => {\r\n    const { sortColumn } = this.props;\r\n\r\n    if (column.path !== sortColumn.path) return null;\r\n    if (sortColumn.order === 'asc') return <i className='fa fa-sort-asc'></i>\r\n    return <i className='fa fa-sort-desc'></i>\r\n  };\r\n\r\n  render() { \r\n    return (\r\n      <thead>\r\n        <tr>\r\n          {this.props.columns.map(column => (\r\n            <th\r\n              className='clickable'\r\n              key={column.path || column.key}\r\n              onClick={() => this.raiseSort(column.path)}\r\n            >\r\n              {column.label} {this.renderSortIcon(column)}\r\n            </th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n    );\r\n  }\r\n}\r\n \r\nexport default TableHeader;","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nclass TableBody extends Component {\r\n  renderCell = (item, column) => {\r\n    if (column.content) return column.content(item);\r\n\r\n    return _.get(item, column.path);\r\n  };\r\n\r\n  createKey = (item, column) => {\r\n    return item._id + (column.path || column.key);\r\n  }\r\n\r\n  render() { \r\n    const { data, columns } = this.props;\r\n\r\n    return (\r\n      <tbody>\r\n        {data.map(item => (\r\n          <tr key={item._id}>\r\n            {columns.map(column => (\r\n              <td key={this.createKey(item, column)}>{this.renderCell(item, column)}</td>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    );\r\n  }\r\n}\r\n \r\nexport default TableBody;","import React from 'react';\r\nimport TableHeader from './tableHeader';\r\nimport TableBody from './tableBody';\r\n\r\nconst Table = ({ columns, sortColumn, onSort, data }) => {\r\n  return (\r\n    <table className='table'>\r\n    <TableHeader \r\n      columns={columns}\r\n      sortColumn={sortColumn}\r\n      onSort={onSort}\r\n    />\r\n    <TableBody \r\n      data={data}\r\n      columns={columns}\r\n    />\r\n  </table>\r\n  );\r\n}\r\n \r\nexport default Table;","import React from 'react';\r\n\r\nconst LikeBtn = (props) => {\r\n  let classes = 'fa fa-heart';\r\n  if (!props.liked) classes += '-o';\r\n  \r\n  return (\r\n    <i\r\n      style={{ cursor: 'pointer' }}\r\n      className={classes}\r\n      onClick = {props.onClick}\r\n    ></i>\r\n  );\r\n};\r\n\r\nexport default LikeBtn;","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport auth from '../services/authService';\r\nimport Table from './common/table';\r\nimport LikeBtn from './common/likeBtn';\r\n\r\nclass MoviesTable extends Component {\r\n  columns = [\r\n    {\r\n      path: 'title',\r\n      label: 'Title',\r\n      content: movie => <Link to={`/movies/${movie._id}`}>{movie.title}</Link>\r\n    },\r\n    { path: 'genre.name', label: 'Genre' },\r\n    { path: 'numberInStock', label: 'Stock' },\r\n    { path: 'dailyRentalRate', label: 'Rate' },\r\n    {\r\n      key: 'Like',\r\n      content: movie => <LikeBtn onClick={() => this.props.onLike(movie)} liked={movie.liked} />\r\n    }\r\n  ];\r\n\r\n  deleteColumn = {\r\n    key: 'Delete',\r\n    content: movie => (\r\n      <button\r\n        onClick={() => this.props.onDelete(movie)}\r\n        className='btn btn-danger btn-sm'\r\n        id={movie._id}\r\n      >\r\n        Delete\r\n      </button>\r\n    )\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    const user = auth.getCurrentUser();\r\n    if (user && user.isAdmin)\r\n      this.columns.push(this.deleteColumn);\r\n  };\r\n\r\n  render() { \r\n    const { movies, sortColumn, onSort, user } = this.props;\r\n\r\n    return (\r\n      <Table \r\n        columns={this.columns}\r\n        data={movies}\r\n        sortColumn={sortColumn}\r\n        onSort={onSort}\r\n      />\r\n    );\r\n  };\r\n};\r\n\r\nexport default MoviesTable;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\n\r\nconst Pagination = (props) => {\r\n  const { itemsCount, pageSize, currentPage, onPageChange } = props;\r\n\r\n  const pagesCount = Math.ceil(itemsCount / pageSize);\r\n  if (pagesCount === 1) return null;\r\n  const pages = _.range(1, pagesCount + 1);\r\n\r\n  return (\r\n    <nav aria-label='Movie navigation'>\r\n      <ul className='pagination'>\r\n        { pages.map(page => (\r\n          <li\r\n            className={ page === currentPage ? 'page-item active' : 'page-item'}\r\n            key={page}\r\n          >\r\n            <a className='page-link' onClick={() => onPageChange(page)}>{page}</a>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n\r\nPagination.propTypes = {\r\n  itemsCount: PropTypes.number.isRequired,\r\n  pageSize: PropTypes.number.isRequired,\r\n  currentPage: PropTypes.number.isRequired,\r\n  onPageChange: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Pagination;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ListGroup = ({ textProperty, valueProperty, listItems, listType, onListSelect, currentList }) => {\r\n  return (\r\n    <div className=\"list-group\">\r\n      { listItems.map(item => (\r\n        <button\r\n          type='button'\r\n          onClick={() => onListSelect(item)}\r\n          className={currentList === item ? 'list-group-item list-group-item-action active' : 'list-group-item list-group-item-action'}\r\n          key={item[valueProperty]}\r\n        >\r\n            {item[textProperty]}\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nListGroup.defaultProps = {\r\n  textProperty: 'name',\r\n  valueProperty: '_id'\r\n}\r\n\r\nListGroup.propTypes = {\r\n  listItems: PropTypes.array.isRequired\r\n};\r\n \r\nexport default ListGroup;","import _ from 'lodash';\r\n\r\nexport function paginate(items, pageNumber, pageSize) {\r\n  const startIdx = (pageNumber - 1) * pageSize;\r\n  return _(items)\r\n    .slice(startIdx)\r\n    .take(pageSize)\r\n    .value();\r\n}","import http from './httpService';\r\n\r\nconst apiEndpoint = '/movies';\r\n\r\nfunction movieUrl(id) {\r\n  return `${apiEndpoint}/${id}`;\r\n}\r\n\r\nexport async function getMovies() {\r\n  return http.get(apiEndpoint);\r\n};\r\n\r\nexport async function getMovie(id) {\r\n  return http.get(movieUrl(id));\r\n};\r\n\r\nexport async function saveMovie(movie) {\r\n  if (movie._id) {\r\n    const body = {...movie};\r\n    delete body._id;\r\n    return http.put(movieUrl(movie._id), body);\r\n  }\r\n    \r\n  return http.post(apiEndpoint, movie);\r\n};\r\n\r\nexport function deleteMovie(id) {\r\n  return http.delete(movieUrl(id));\r\n};","import http from './httpService';\r\n\r\nexport function getGenres() {\r\n  return http.get('/genres');\r\n};","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport SearchBox from './common/searchBox';\r\nimport MoviesTable from './moviesTable';\r\nimport Pagination from './common/pagination';\r\nimport ListGroup from './common/listGroup';\r\nimport { paginate } from '../utils/paginate';\r\nimport { getMovies, deleteMovie } from '../services/movieService';\r\nimport { getGenres } from '../services/genreService';\r\nimport _ from 'lodash';\r\n\r\nclass Movies extends Component {\r\n  state = {\r\n    movies: [],\r\n    genres: [],\r\n    pageSize: 4,\r\n    searchQuery: '',\r\n    currentGenre: null,\r\n    currentPage: 1,\r\n    sortColumn: { path: 'title', order: 'asc' }\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { data } = await getGenres();\r\n    const genres = [{ name: 'All Genres', _id: '' }, ...data];\r\n\r\n    const { data: movies } = await getMovies();\r\n    this.setState({ movies, genres });\r\n  };\r\n\r\n  handleDelete = async movie => {\r\n    const originalMovies = this.state.movies;\r\n    const movies = originalMovies.filter(m => m._id !== movie._id);\r\n    this.setState({ movies });\r\n\r\n    try {\r\n      await deleteMovie(movie._id);\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 404)\r\n        toast.error('This movie has already been deleted.');\r\n\r\n      this.setState({ movies: originalMovies });\r\n    };\r\n  };\r\n\r\n  handleLike = movie => {\r\n    const movies = [...this.state.movies];\r\n    const index = movies.indexOf(movie);\r\n\r\n    movies[index] = { ...movies[index] };\r\n    movies[index].liked = !movies[index].liked;\r\n\r\n    this.setState({movies});\r\n  };\r\n\r\n  handleSort = sortColumn => {\r\n    this.setState({ sortColumn })\r\n  };\r\n\r\n  handlePageChange = page => {\r\n    this.setState({ currentPage: page });\r\n  };\r\n\r\n  handleListSelect = list => {\r\n    this.setState({ searchQuery: '', currentGenre: list, currentPage: 1 });\r\n  };\r\n\r\n  handleSearch = query => {\r\n    this.setState({ searchQuery: query, currentGenre: null, currentPage: 1});\r\n  };\r\n\r\n  getPagedData = () => {\r\n    const {\r\n      movies: allMovies,\r\n      pageSize,\r\n      currentPage,\r\n      currentGenre,\r\n      sortColumn,\r\n      searchQuery\r\n    } = this.state;\r\n\r\n    let filteredMovies = allMovies;\r\n    if (searchQuery)\r\n      filteredMovies = allMovies.filter(m =>\r\n        m.title.toLowerCase().startsWith(searchQuery.toLowerCase())  \r\n      );\r\n    else if (currentGenre && currentGenre._id)\r\n      filteredMovies = allMovies.filter(m => m.genre._id === currentGenre._id);\r\n    \r\n    const sortedMovies = _.orderBy(filteredMovies, [sortColumn.path], [sortColumn.order]);\r\n    const displayedMovies = paginate(sortedMovies, currentPage, pageSize);\r\n\r\n    return { totalCount : filteredMovies.length, data: displayedMovies };\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      genres,\r\n      pageSize,\r\n      currentPage,\r\n      currentGenre,\r\n      sortColumn,\r\n      searchQuery\r\n    } = this.state;\r\n    const { user } = this.props;\r\n\r\n    const { totalCount, data: displayedMovies } = this.getPagedData();\r\n\r\n    return (\r\n      <div className='row'>\r\n        <div className='col-3'>\r\n          <ListGroup\r\n            listItems={genres}\r\n            currentList={currentGenre}\r\n            onListSelect={this.handleListSelect}\r\n          />\r\n        </div>\r\n        <div className='col'>\r\n          { user && <Link to='/movies/new'>\r\n            <button\r\n              type=\"button\" \r\n              className=\"btn btn-primary\"\r\n              style={{ marginBottom: 20 }}\r\n            >\r\n              New Movie\r\n            </button>\r\n          </Link> }\r\n          <p className='m-2'>Showing {totalCount} movies in the database.</p>\r\n          <SearchBox\r\n            value={searchQuery}\r\n            onChange={this.handleSearch}\r\n          />\r\n          <MoviesTable \r\n            movies={displayedMovies}\r\n            sortColumn={sortColumn}\r\n            onLike={this.handleLike}\r\n            onDelete={this.handleDelete}\r\n            onSort={this.handleSort}\r\n          />\r\n          <Pagination\r\n            itemsCount={totalCount}\r\n            pageSize={pageSize}\r\n            currentPage={currentPage}\r\n            onPageChange={this.handlePageChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n};\r\n \r\nexport default Movies;","import React from 'react';\r\n\r\nconst Input = ({ name, label, error, ...rest }) => {\r\n  return (\r\n    <div className='form-group'>\r\n      <label htmlFor={name}>{label}</label>\r\n      <input\r\n        {...rest}\r\n        id={name}\r\n        name={name}\r\n        className='form-control'\r\n      />\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default Input;","import React from 'react';\r\n\r\nconst Select = ({name, label, options, error, ...rest}) => {\r\n  return (\r\n    <div className='form-group'>\r\n      <label htmlFor={name}>{label}</label>\r\n      <select\r\n        {...rest}\r\n        name={name}\r\n        id={name}\r\n        className='form-control'\r\n      >\r\n        <option value='' />\r\n        {options.map(option => (\r\n          <option key={option._id} value={option._id}>{option.name}</option>\r\n        ))}\r\n      </select>\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default Select;","import React, { Component } from 'react';\r\nimport Joi from 'joi-browser';\r\nimport Input from './input';\r\nimport Select from './select';\r\n\r\nclass Form extends Component {\r\n  state = {\r\n    data: {},\r\n    errors: {}\r\n  };\r\n\r\n  validate = () => {\r\n    const options = { abortEarly: false };\r\n    const { error } = Joi.validate(this.state.data, this.schema, options);\r\n    if (!error) return null;\r\n\r\n    const errors = {};\r\n    for (let item of error.details)\r\n      errors[item.path[0]] = item.message;\r\n    return errors;\r\n  };\r\n\r\n  validateProperty = ({ name, value }) => {\r\n    const obj = { [name] : value };\r\n    const schema = { [name]: this.schema[name] };\r\n    const { error } = Joi.validate(obj, schema);\r\n    return error ? error.details[0].message : null;\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    const errors = this.validate();\r\n    this.setState({ errors: errors || {} });\r\n    if (errors) return;\r\n\r\n    this.doSubmit();\r\n  };\r\n\r\n  handleChange = ({ currentTarget: input }) => {\r\n    const errors = {...this.state.errors};\r\n    const errorMessage = this.validateProperty(input);\r\n    if (errorMessage) errors[input.name] = errorMessage;\r\n    else delete errors[input.name];\r\n\r\n    const data = {...this.state.data};\r\n    data[input.name] = input.value;\r\n\r\n    this.setState({ data, errors });\r\n  };\r\n\r\n  renderButton(label) {\r\n    return (\r\n      <button disabled={this.validate()} className=\"btn btn-primary\">\r\n        {label}\r\n      </button>\r\n    );\r\n  };\r\n\r\n  renderInput(name, label, type = 'text') {\r\n    const { data, errors } = this.state;\r\n\r\n    return (\r\n      <Input\r\n        type={type}\r\n        name={name}\r\n        value={data[name]}\r\n        label={label}\r\n        onChange={this.handleChange}\r\n        error={errors[name]}\r\n      />\r\n    );\r\n  };\r\n\r\n  renderSelect(name, label, options) {\r\n    const { data, errors } = this.state;\r\n\r\n    return (\r\n      <Select\r\n        name={name}\r\n        value={data[name]}\r\n        label={label}\r\n        options={options}\r\n        onChange={this.handleChange}\r\n        error={errors[name]}\r\n      />\r\n    );\r\n  };\r\n};\r\n \r\nexport default Form;","import React from 'react';\r\nimport Joi from 'joi-browser';\r\nimport Form from './common/form';\r\nimport { getMovie, saveMovie } from '../services/movieService';\r\nimport { getGenres } from '../services/genreService';\r\n\r\nclass MovieForm extends Form {\r\n  state = {\r\n    data: {\r\n      title: '',\r\n      genreId: '',\r\n      numberInStock: '',\r\n      dailyRentalRate: ''\r\n    },\r\n    genres: [],\r\n    errors: {}\r\n  };\r\n\r\n  schema = {\r\n    _id: Joi.string(),\r\n    title: Joi.string().required().label('Title'),\r\n    genreId: Joi.string().required().label('Genre'),\r\n    numberInStock: Joi.number().min(0).max(100).required().label('Number in Stock'),\r\n    dailyRentalRate: Joi.number().required().min(0).max(10).label('Daily Rental Rate')\r\n  };\r\n\r\n  async populateGenres() {\r\n    const { data: genres } = await getGenres();\r\n    this.setState({ genres });\r\n  };\r\n\r\n  async populateMovie() {\r\n    try {\r\n      const movieId = this.props.match.params.id;\r\n      if (movieId === 'new') return;\r\n\r\n      const { data: movie } = await getMovie(movieId);\r\n      this.setState({ data: this.mapToViewModel(movie) });\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 404)\r\n        this.props.history.replace('/not-found');\r\n    };\r\n  };\r\n\r\n  async componentDidMount() {\r\n    await this.populateGenres();\r\n    await this.populateMovie();\r\n  };\r\n\r\n  mapToViewModel(movie) {\r\n    return {\r\n      _id: movie._id,\r\n      title: movie.title,\r\n      genreId: movie.genre._id,\r\n      numberInStock: movie.numberInStock,\r\n      dailyRentalRate: movie.dailyRentalRate\r\n    };\r\n  };\r\n\r\n  doSubmit = async () => {\r\n    await saveMovie(this.state.data);\r\n    \r\n    this.props.history.push('/movies');\r\n  };\r\n\r\n  render() { \r\n    return (\r\n      <div>\r\n        <h1>Movie Form</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput('title', 'Title')}\r\n          {this.renderSelect('genreId', 'Genre', this.state.genres)}\r\n          {this.renderInput('numberInStock', 'Stock', 'number')}\r\n          {this.renderInput('dailyRentalRate', 'Rate', 'number')}\r\n          {this.renderButton('Save')}\r\n        </form>\r\n      </div>\r\n    );\r\n  };\r\n};\r\n \r\nexport default MovieForm;","import React from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\n\r\nconst Navbar = ({ user }) => {\r\n  return (\r\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n      <Link className=\"navbar-brand\" to='/'>\r\n        Vidly App\r\n      </Link>\r\n\r\n      <button\r\n        className=\"navbar-toggler\"\r\n        type=\"button\"\r\n        data-toggle='collapse'\r\n        data-target='#navbarNav'\r\n      >\r\n        <span className=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n\r\n      <div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n        <div className=\"navbar-nav\">\r\n          <NavLink className='nav-item nav-link' to='/movies'>Movies</NavLink>\r\n          <NavLink className='nav-item nav-link' to='/customers'>Customers</NavLink>\r\n          <NavLink className='nav-item nav-link' to='/rentals'>Rentals</NavLink>\r\n          {!user && (\r\n            <React.Fragment>\r\n              <NavLink className='nav-item nav-link' to='/login'>Login</NavLink>\r\n              <NavLink className='nav-item nav-link' to='/register'>Register</NavLink>\r\n            </React.Fragment>\r\n          )}\r\n          {user && (\r\n            <React.Fragment>\r\n              <NavLink className='nav-item nav-link' to='/profile'>{user.name}</NavLink>\r\n              <NavLink className='nav-item nav-link' to='/logout'>Logout</NavLink>\r\n            </React.Fragment>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n \r\nexport default Navbar;","import React from 'react';\r\n\r\nconst Customers = () => {\r\n  return (\r\n    <h1>Customers</h1>\r\n  );\r\n}\r\n \r\nexport default Customers;","import React from 'react';\r\n\r\nconst Rentals = () => {\r\n  return (\r\n    <h1>Rentals</h1>\r\n  );\r\n}\r\n \r\nexport default Rentals;","import React from 'react';\r\n\r\nconst NotFound = () => {\r\n  return (\r\n    <h1>Not Found</h1>\r\n  );\r\n}\r\n \r\nexport default NotFound;","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Joi from 'joi-browser';\r\nimport Form from './form';\r\nimport auth from '../../services/authService';\r\n\r\nclass LoginForm extends Form {\r\n  state = {\r\n    data: {\r\n      username: '',\r\n      password: ''\r\n    },\r\n    errors: {}\r\n  };\r\n\r\n  schema = {\r\n    username: Joi.string().required().label('Username'),\r\n    password: Joi.string().required().label('Password')\r\n  };\r\n\r\n  doSubmit = async () => {\r\n    try {      \r\n      const { data } = this.state;\r\n      await auth.login(data.username, data.password);\r\n\r\n      const { state } = this.props.location;\r\n      window.location = state ? state.from.pathname : '/';\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 400) {\r\n        const errors = {...this.state.errors};\r\n        errors.username = ex.response.data;\r\n        this.setState({ errors });\r\n      };\r\n    };\r\n  };\r\n\r\n  render() {\r\n    if (auth.getCurrentUser()) return <Redirect to='/' />;\r\n\r\n    return (\r\n      <div>\r\n        <h1>Login</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput('username', 'Username')}\r\n          {this.renderInput('password', 'Password', 'password')}\r\n          {this.renderButton('Log In')}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default LoginForm;","import React, { Component } from 'react';\r\nimport auth from '../../services/authService';\r\n\r\nclass Logout extends Component {\r\n  componentDidMount() {\r\n    auth.logout();\r\n    window.location = '/';\r\n  };\r\n  \r\n  render() { \r\n    return null;\r\n  };\r\n};\r\n \r\nexport default Logout;","import http from './httpService';\r\n\r\nconst apiEndpoint = '/users';\r\n\r\nexport function register(user) {\r\n  return http.post(apiEndpoint, {\r\n    email: user.username,\r\n    password: user.password,\r\n    name: user.name\r\n  });\r\n};","import React from 'react'\r\nimport Joi from 'joi-browser';\r\nimport Form from './form';\r\nimport { register } from '../../services/userService';\r\nimport auth from '../../services/authService';\r\n\r\nclass RegisterForm extends Form {\r\n  state = {\r\n    data: {\r\n      username: '',\r\n      password: '',\r\n      name: ''\r\n    },\r\n    errors: {}\r\n  };\r\n\r\n  schema = {\r\n    username: Joi.string().email().required().label('Username'),\r\n    password: Joi.string().min(5).required().label('Password'),\r\n    name: Joi.string().required().label('Name')\r\n  };\r\n\r\n  doSubmit = async () => {\r\n    try {\r\n      const response = await register(this.state.data);\r\n      auth.loginWithJwt(response.headers['x-auth-token']);\r\n      window.location('/');\r\n    } catch (ex) {\r\n      if (ex.response && ex.response.status === 400) {\r\n        const errors = {...this.state.errors};\r\n        errors.username = ex.response.data;\r\n        this.setState({ errors });\r\n      };\r\n    };\r\n  };\r\n\r\n  render() { \r\n    return (\r\n      <div>\r\n        <h1>Register</h1>\r\n        <form onSubmit={this.handleSubmit}>\r\n          {this.renderInput('username', 'Username')}\r\n          {this.renderInput('password', 'Password', 'password')}\r\n          {this.renderInput('name', 'Name')}\r\n          {this.renderButton('Register')}\r\n        </form>\r\n      </div>\r\n    );\r\n  };\r\n};\r\n \r\nexport default RegisterForm;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport auth from '../../services/authService';\r\n\r\nconst ProtectedRoute = ({ path, component: Component, render, ...rest }) => {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => {\r\n        if (!auth.getCurrentUser()) return <Redirect to={{\r\n          pathname: '/login',\r\n          state: { from: props.location }\r\n        }} />;\r\n        return Component ? <Component {...props} /> : render(props);\r\n      }}\r\n    />\r\n  );\r\n};\r\n \r\nexport default ProtectedRoute;","import React, { Component } from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport Movies from './components/movies';\r\nimport MovieForm from './components/movieForm';\r\nimport Navbar from './components/navbar';\r\nimport Customers from './components/customers';\r\nimport Rentals from './components/rentals';\r\nimport NotFound from './components/notFound';\r\nimport LoginForm from './components/common/loginForm';\r\nimport Logout from './components/common/logout';\r\nimport RegisterForm from './components/common/registerForm';\r\nimport ProtectedRoute from './components/common/protectedRoute';\r\nimport auth from './services/authService';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nclass App extends Component {\r\n  state = {};\r\n\r\n  componentDidMount() {\r\n    const user = auth.getCurrentUser();\r\n    this.setState({ user });\r\n  };\r\n\r\n  render() {\r\n    const { user } = this.state;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ToastContainer />\r\n        <Navbar \r\n          user={user}\r\n        />\r\n        <main className='container'>\r\n          <Switch>\r\n            <Route path='/logout' component={Logout} />\r\n            <Route path='/login' component={LoginForm} />\r\n            <Route path='/register' component={RegisterForm} />\r\n            <ProtectedRoute path='/movies/:id' component={MovieForm} />\r\n            <Route\r\n              path='/movies'\r\n              render={props => <Movies {...props} user={user} />}\r\n            />\r\n            <Route path='/customers' component={Customers} />\r\n            <Route path='/rentals' component={Rentals} />\r\n            <Route path='/not-found' component={NotFound} />\r\n            <Redirect exact from='/' to='/movies' />\r\n            <Redirect to='/not-found' />\r\n          </Switch>\r\n        </main>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n};\r\n \r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);"],"sourceRoot":""}